# MySQL锁状态可视化工具

一个专业的MySQL锁状态可视化工具，用于监控、分析和解决MySQL数据库中的锁问题。

## 🚀 快速开始

### 手动启动
1. 确保已安装 Node.js (https://nodejs.org/)
2. 安装依赖：`npm install`
3. 启动服务：`npm start`
4. 访问：`http://localhost:3000`

## 🔧 连接配置

### 前端配置（推荐方式）
1. 启动应用后点击"管理配置"
2. 添加MySQL连接信息：
   - 连接名称：自定义标识
   - 主机地址：MySQL服务器地址
   - 端口：默认3306
   - 用户名：MySQL用户名
   - 密码：MySQL密码
   - 数据库：performance_schema
3. 选择连接并点击"连接"

## ✨ 功能特性

- **🔍 实时锁监控**：显示MySQL 8.0+锁状态和等待关系
- **📊 锁范围可视化**：表锁、行锁、间隙锁直观展示
- **🔄 强制释放锁**：解决长期占用锁问题
- **🌐 多连接管理**：支持多个MySQL环境切换
- **⏱️ 占用时间显示**：识别长时间锁占用
- **👁️ 双视图模式**：简化视图和详细视图切换
- **🎨 智能颜色编码**：根据锁类型和占用时间着色
- **📱 响应式界面**：适配不同屏幕尺寸

## 🛠️ 技术栈

- **后端**：Node.js + Express + MySQL2
- **前端**：原生HTML + CSS + JavaScript
- **数据库**：MySQL 8.0+
- **架构**：前后端分离 + RESTful API

## 📋 使用指南

### 监控锁状态
1. 连接到MySQL数据库
2. 查看当前锁信息和等待关系
3. 切换视图模式查看不同详情
4. 观察锁占用时间识别问题

### 释放锁
1. 在锁信息表格找到问题锁
2. 点击"🔄 释放锁"按钮
3. 确认操作后强制释放锁

### 管理连接
1. 点击"管理配置"添加多个环境
2. 在下拉框中选择连接
3. 点击"连接"按钮建立连接

## ⚠️ 注意事项

- **系统要求**：Windows系统 + Node.js 14+ + MySQL 8.0+
- **权限要求**：需要访问performance_schema的权限
- **安全提醒**：强制释放锁会终止连接，请谨慎使用
- **建议环境**：开发和测试环境优先使用
- **性能影响**：频繁查询可能影响数据库性能

## 🔧 故障排除

**无法启动**：检查Node.js是否正确安装
**连接失败**：验证MySQL配置和网络连接
**端口占用**：工具会自动清理3000端口
**权限错误**：确保MySQL用户有足够权限
**数据异常**：检查MySQL版本是否为8.0+

## 📈 版本历史

- **v1.0**：基础锁监控功能
- **v1.1**：添加强制释放锁功能
- **v1.2**：优化锁等待关系显示
- **v1.3**：增加占用时间显示